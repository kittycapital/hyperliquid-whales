<!-- ============================================
     하이퍼리퀴드 트래커 iframe 임베딩 수정 가이드
     3가지 변경사항
     ============================================ -->

<!-- ─────────────────────────────────────────────
     변경 1: CSS — sticky nav 제거
     ─────────────────────────────────────────────
     
     찾기 (원본):
     .top-nav{width:100%;background:#0a0a0a;border-bottom:1px solid #1a1a1a;padding:0 20px;position:sticky;top:0;z-index:100}
     
     바꾸기 (수정):
     .top-nav{width:100%;background:#0a0a0a;border-bottom:1px solid #1a1a1a;padding:0 20px;position:relative;z-index:100}
     
     설명: iframe 안에서 sticky는 iframe 뷰포트 기준이라 
     부모 스크롤과 따로 놀아요. relative로 바꾸면 자연스럽게 흐릅니다.
-->


<!-- ─────────────────────────────────────────────
     변경 2: JS — copyLink 함수에 postMessage 추가
     ─────────────────────────────────────────────
     
     찾기 (원본):
     function copyLink(){navigator.clipboard.writeText(SHARE_URL).then(()=>{const t=document.getElementById('share-toast');t.style.display='block';setTimeout(()=>t.style.display='none',2000);});}
     
     바꾸기 (수정):
     function copyLink(){try{window.parent.postMessage({type:'clipboard',text:SHARE_URL},'*');}catch(e){}try{navigator.clipboard.writeText(SHARE_URL);}catch(e){}var t=document.getElementById('share-toast');t.style.display='block';setTimeout(function(){t.style.display='none';},2000);}
     
     설명: iframe 안에서는 navigator.clipboard가 차단될 수 있어서
     부모에게 postMessage로 클립보드 텍스트를 전달합니다.
     다른 대시보드들과 동일한 패턴입니다.
-->


<!-- ─────────────────────────────────────────────
     변경 3: </body> 바로 위에 아래 스크립트 추가
     ───────────────────────────────────────────── -->
     
<!-- 아래 코드를 복사해서 </body> 바로 위에 붙여넣기 -->

    <!-- iframe 자동 높이 리사이즈 (imweb 임베딩용) -->
    <script>
    (function(){
        var lastH = 0;
        function sendHeight(){
            var h = document.documentElement.scrollHeight;
            if(h !== lastH){
                lastH = h;
                try { window.parent.postMessage({ type:'resize', height: h }, '*'); } catch(e){}
            }
        }
        // ResizeObserver: 레이아웃 변경 감지
        if(typeof ResizeObserver !== 'undefined'){
            new ResizeObserver(sendHeight).observe(document.body);
        }
        // MutationObserver: DOM 변경 감지 (탭 전환, 포지션 펼침, 차트 열기)
        new MutationObserver(function(){
            sendHeight();
            setTimeout(sendHeight, 300);
        }).observe(document.body, {
            childList: true, subtree: true,
            attributes: true, attributeFilter: ['class','style']
        });
        // 초기 + 폴백
        sendHeight();
        window.addEventListener('resize', sendHeight);
        window.addEventListener('load', function(){
            sendHeight();
            setTimeout(sendHeight, 500);
            setTimeout(sendHeight, 1500);
        });
        // Chart.js 렌더 후 높이 재확인 (2초마다)
        setInterval(sendHeight, 2000);
    })();
    </script>


<!-- ─────────────────────────────────────────────
     imweb 부모 페이지 iframe 코드
     ─────────────────────────────────────────────
     imweb에서 iframe을 넣을 때 아래 코드를 사용하세요.
     (이미 다른 대시보드에서 사용 중인 패턴과 동일) -->

<!--
<iframe id="hl-tracker" 
        src="http://app.herdvibe.com/hyperliquid-whales/" 
        style="width:100%;border:none;overflow:hidden;min-height:800px"
        scrolling="no">
</iframe>
<script>
window.addEventListener('message', function(e){
    if(e.data && e.data.type === 'resize'){
        document.getElementById('hl-tracker').style.height = e.data.height + 'px';
    }
    if(e.data && e.data.type === 'clipboard'){
        navigator.clipboard.writeText(e.data.text).catch(function(){});
    }
});
</script>
-->
